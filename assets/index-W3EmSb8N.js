(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const d=["png","jpeg","gif","bmp","webp"],i=document.getElementById("output-format"),a=document.createElement("canvas"),f=a.getContext("2d"),p=document.getElementById("format-suggestions"),s=document.getElementById("upload-area"),h=document.getElementById("file-input"),v=document.getElementById("do-save"),u=document.getElementById("image-previews");i.onchange=()=>{i.value.length===0&&(i.value=d[0]);const e=i.value;g(e)?i.classList.remove("invalid"):i.classList.add("invalid")};p.innerHTML=d.map(e=>`<option value="${e}"></option>`).join("");s.addEventListener("click",()=>h.click());s.addEventListener("dragover",e=>{e.preventDefault(),s.classList.add("drag-over")});s.addEventListener("dragleave",()=>{s.classList.remove("drag-over")});s.addEventListener("drop",e=>{if(e.preventDefault(),s.classList.remove("drag-over"),e.dataTransfer==null)return;const t=e.dataTransfer.files;t.length!=0&&m(t)});document.getElementById("file-input").onchange=e=>{const t=e.target;t.files==null||t.files.length==0||m(t.files)};function m(e){if(!g(i.value)){alert("Target Image format not supported");return}u.innerHTML="";for(const t of e)E(t)}function E(e){const t=new Image,o=i.value;e.type==="image/"+o&&!confirm(`Original and target file-type look to be the same!(${e.name})
Continue anyway?`)||(t.src=URL.createObjectURL(e),t.onload=()=>{if(t.naturalWidth==0){const n=prompt(`Enter width for ${e.name}:`);if(n==null)return alert(`Could not convert image ${e.name}
No size`);a.width=parseInt(n)}else a.width=t.naturalWidth;if(t.naturalHeight==0){const n=prompt(`Enter width for ${e.name}:`);if(n==null)return alert(`Could not convert image ${e.name}!
No size`);a.height=parseInt(n)}else a.height=t.naturalHeight;f.drawImage(t,0,0,a.width,a.height),console.log(a.height,a.width);const l=a.toDataURL("image/"+o);console.log(l,o),y(l,e.name)},t.onerror=()=>{alert("Could not load image!")})}function y(e,t){if(v.checked){const o=document.createElement("a");o.href=e,o.download=t,o.click()}else{const o=document.createElement("img");o.src=e,o.onclick=()=>{window.open(o.src)},u.appendChild(o)}}const L=document.createElement("canvas");function g(e){return e==="png"?!0:!L.toDataURL("image/"+e).startsWith("data:image/png")}
