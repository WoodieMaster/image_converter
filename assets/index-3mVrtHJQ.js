(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const d=["png","jpeg","gif","bmp","webp"],a=document.getElementById("output-format"),c=document.createElement("canvas"),g=c.getContext("2d"),p=document.getElementById("format-suggestions"),i=document.getElementById("upload-area"),v=document.getElementById("file-input"),h=document.getElementById("do-save"),u=document.getElementById("image-previews");a.onchange=()=>{a.value.length===0&&(a.value=d[0]);const e=a.value;f(e)?a.classList.remove("invalid"):a.classList.add("invalid")};p.innerHTML=d.map(e=>`<option value="${e}"></option>`).join("");i.addEventListener("click",()=>v.click());i.addEventListener("dragover",e=>{e.preventDefault(),i.classList.add("drag-over")});i.addEventListener("dragleave",()=>{i.classList.remove("drag-over")});i.addEventListener("drop",e=>{if(e.preventDefault(),i.classList.remove("drag-over"),e.dataTransfer==null)return;const t=e.dataTransfer.files;t.length!=0&&m(t)});document.getElementById("file-input").onchange=e=>{const t=e.target;t.files==null||t.files.length==0||m(t.files)};function m(e){if(!f(a.value)){alert("Target Image format not supported");return}u.innerHTML="";for(const t of e)y(t)}function y(e){const t=new Image,o=a.value;e.type==="image/"+o&&!confirm(`Original and target file-type look to be the same!
Continue anyway?`)||(t.src=URL.createObjectURL(e),console.log(e.name),t.onload=()=>{c.width=t.naturalWidth,c.height=t.naturalHeight,g.drawImage(t,0,0);const s=c.toDataURL("image/"+o);E(s,e.name)},t.onerror=()=>{alert("Could not load image!")})}function E(e,t){if(h.checked){const o=document.createElement("a");o.href=e,o.download=t,o.click()}else{const o=document.createElement("img");o.src=e,o.onclick=()=>{window.open(o.src)},u.appendChild(o)}}const L=document.createElement("canvas");function f(e){return e==="png"?!0:!L.toDataURL("image/"+e).startsWith("data:image/png")}
